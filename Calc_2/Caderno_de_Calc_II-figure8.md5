\begingroup \toks 0={macro:-> \begin {axis}[ xmin=-1, xmax=5, ymin=0.5, ymax=5.5, axis x line=middle, axis y line=middle, samples=200, xlabel={$x$}, ylabel={$y$}, axis line style={-{Stealth[length=3mm,width=1.5mm]}}, axis on top ] \addplot [blue, thick, domain=-1:4.5, name path=curva] {(x-2)^2+1}; \addplot [red, thick, domain=-1:4.5, name path=reta ] {x+1}; \par \addplot [ pattern=north east lines, pattern color=gray, ] fill between [ of=curva and reta, split, every segment no 0/.style={transparent}, every segment no 1/.style={pattern=north east lines}, every segment no 2/.style={transparent} ]; \end {axis} }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
