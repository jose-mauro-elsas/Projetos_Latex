\begingroup \toks 0={macro:-> \begin {axis}[ xmin=1.5, xmax=5.5, ymin=-6, ymax=5, axis x line=middle, axis y line=middle, axis line style={-{Stealth[length=3mm,width=1.5mm]}}, xlabel={$x$}, ylabel={$y$}, title={$f(x)=4x-x^2$}, samples=200, ] \addplot [red, domain=2:5, thick] {4*x-x^2}; \par \addplot [fill=gray!20, opacity=0.5, domain=2:4] {4*x-x^2} \closedcycle ; \par \addplot [fill=gray!40, opacity=0.5, domain=4:5] {4*x-x^2} \closedcycle ; \par \draw [dashed] (axis cs:2,0) -- (axis cs:2,4); \draw [dashed] (axis cs:5,0) -- (axis cs:5,-5); \end {axis} }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
