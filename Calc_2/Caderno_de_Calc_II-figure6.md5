\begingroup \toks 0={macro:-> \begin {axis}[ axis x line=middle, axis y line=middle, axis line style={-{Stealth[length=3mm,width=2mm]}}, xlabel={$x$}, ylabel={$y$}, xmin=0, xmax=4, ymin=0, ymax=5, title={Caso 1: $f(x) \ge 0$ em $[a,b]$}, ] \def \a {0.5} \def \b {3.5} \addplot [name path=curva, thick, blue, domain=\a :\b , samples=200] {0.5*(x-2)^2+1}; \addplot [name path=eixo, draw=none, domain=\a :\b ] {0}; \addplot [fill=gray!20, draw=none] fill between[of=curva and eixo]; \draw [line width=0.6pt] (axis cs:\a ,0) -- (axis cs:\a ,{0.5*(\a -2)^2+1}); \draw [line width=0.6pt] (axis cs:\b ,0) -- (axis cs:\b ,{0.5*(\b -2)^2+1}); \node [below] at (axis cs:\a ,0) {$a$}; \node [below] at (axis cs:\b ,0) {$b$}; \end {axis} }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
